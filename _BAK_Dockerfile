FROM centos:6.6
ENV container docker

VOLUME [ "/sys/fs/cgroup" ]

RUN yum -y install httpd; service httpd start
EXPOSE 80

CMD ["/usr/sbin/init"]

CMD ["/bin/echo 'Hi Richie 1'"]

# Get the Latest EPEL for centos 6
# RUN rpm -ivh http://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm

# Get the pgdg package which contains the PostgreSQL 96 rpms for Centos6:
RUN rpm -ivh https://yum.postgresql.org/9.6/redhat/rhel-6.9-x86_64/pgdg-centos96-9.6-3.noarch.rpm

# Install PostgreSQL 9.6
RUN yum -y install postgresql96 postgresql96-server postgresql96-libs postgresql96-contrib; yum clean all

# Initialise the db
RUN service postgresql-9.6 initdb

# Start the PostgreSQL service
RUN service postgresql-9.6 start

CMD ["/bin/echo 'Hi Richie 2'"]

# Set the working directory to /app
WORKDIR /app

# Copy the current directory contents into the container at /app
ADD Centos6_Postgres96 /app

# Make port 80 available to the world outside this container
EXPOSE 5432

# Define environment variable
ENV psql /usr/pgsql-9.6/bin/psql

# Build Command:
# docker build --rm -t local/centos6-baseimage .