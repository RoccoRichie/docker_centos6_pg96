version: '3'

services:
  # Service No 1 - Postgres
  postgres_master:
    image: aintgriz/centos6-postgres96:0.4
    ports:
      - '6432:5432'
#    volumes:
#      - "/var/tmp/docker/pg96/master/data:/var/lib/pgsql/9.6/data"
  # Service No 2 - Postgres
  postgres_slave:
    image: aintgriz/centos6-postgres96:0.4
    ports:
      - '7432:5432'
  # Service No 3 - Visualiser
  visualizer:
    image: dockersamples/visualizer:stable
    ports:
      - "8080:8080"
    volumes:
      - "/var/run/docker.sock:/var/run/docker.sock"
    deploy:
      placement:
        constraints: [node.role == manager]
    networks:
      - webnet
networks:
  webnet:
